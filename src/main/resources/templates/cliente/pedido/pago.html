<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Tu Título</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		.modal-content {
			width: 300px;
		}
	</style>
</head>

<body>
	<div class="container mt-3">
		<div class="card p-3" style="width: 28rem;">
			<img src="" alt="">
			<div class="card-body mx-auto">
				<h5 class="card-title" th:text="${producto.producto.nombre}"></h5>
				<p class="card-text" th:text="${producto.producto.descripcion}"></p>
				<p><b>Precio: </b></p>
				<p th:text="${producto.precio} * ${cantidad}"></p>
			</div>
			<!--<div class="formulario-pago mx-auto" style="width: 19rem;">
				<form id="formulario-pago" class="form-horizontal" onsubmit="return validarFormulario()">
					<div class="form-group">
						<label for="nombre" class="col-sm-12 control-label">Nombre:</label>
						<div class="col-sm-12">
							<input type="text" class="form-control" id="nombre" name="nombre" required>
						</div>
					</div>
					<div class="form-group">
						<label for="tarjeta" class="col-sm-12 control-label">Número de tarjeta:</label>
						<div class="col-sm-12">
							<input type="text" class="form-control" id="tarjeta" name="tarjeta" required>
						</div>
					</div>
					<div class="form-group">
						<label for="vencimiento" class="col-sm-12 control-label">Vencimiento:</label>
						<div class="col-sm-12">
							<input type="text" class="form-control" id="vencimiento" name="vencimiento" required>
						</div>
					</div>
					<div class="form-group">
						<label for="cvc" class="col-sm-12 control-label">CVC:</label>
						<div class="col-sm-12">
							<input type="text" class="form-control" id="cvc" name="cvc" required>
						</div>
					</div>
					<div class="form-group">
						<label for="cp" class="col-sm-12 control-label">Código postal:</label>
						<div class="col-sm-12">
							<input type="text" class="form-control" id="cp" name="cp" required>
						</div>
					</div>
					<div class="card-body text-center">
						<button type="submit" class="btn btn-primary" onclick="mostrarVentana()">Pagar</button>
					</div>
				</form>
			</div>-->
			<div class="card-body text-center">
				<button type="submit" class="btn btn-primary" onclick="mostrarVentana()">Pagar</button>
			</div>

		</div>
	</div>

	<!-- Ventana emergente -->
	<div id="miVentana" class="modal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Datos del Pago</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<!-- Aquí puedes mostrar los datos del pago -->
					<p>ID: <span id="idProducto"></span></p>
					<p>Producto: <span id="nombreProducto"></span></p>
					<p>Cantidad: <span id="cantidad"></span></p>
					<p>Precio Total: <span id="precioTotal"></span></p>
				</div>
				<div class="modal-footer">
					<!-- Botones de confirmar y cancelar -->
					<button type="button" class="btn btn-success" onclick="confirmarPago()">Confirmar</button>
					<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Enlaza Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Script para manejar la ventana emergente -->
	<script th:inline="javascript">
		function mostrarVentana() {
			// Obtener los datos del producto y la cantidad desde las variables Thymeleaf
			var nombreProducto = /*[[${producto.producto.nombre}]]*/ '';
			var cantidad = /*[[${cantidad}]]*/ '';
			var precioTotal = /*[[${producto.precio * cantidad}]]*/ '';

			// Actualizar los datos en la ventana emergente
			document.getElementById('nombreProducto').textContent = nombreProducto;
			document.getElementById('cantidad').textContent = cantidad;
			document.getElementById('precioTotal').textContent = precioTotal;

			// Mostrar la ventana emergente
			var miVentana = new bootstrap.Modal(document.getElementById('miVentana'));
			miVentana.show();
		}

		function confirmarPago() {
			// Aquí puedes agregar la lógica para confirmar el pago
			// Por ejemplo, enviar los datos del pago al servidor
			// Una vez que el pago se confirma, puedes redirigir al usuario a una página de confirmación o realizar cualquier otra acción necesaria
			// Aquí simplemente cerramos la ventana emergente
			var miVentana = new bootstrap.Modal(document.getElementById('miVentana'));
			miVentana.hide();
		}

		/*function validarFormulario() {
			const nombre = document.getElementById("nombre").value;
			const tarjeta = document.getElementById("tarjeta").value;
			const vencimiento = document.getElementById("vencimiento").value;
			const cvc = document.getElementById("cvc").value;
			const cp = document.getElementById("cp").value;

			if (nombre === "") {
				return false;
			}
			if (tarjeta === "") {
				return false;
			}
			if (vencimiento === "") {
				return false;
			}
			if (cvc === "") {
				return false;
			}
			if (cp === "") {
				return false;
			}
			mostrarVentana();

			return true;
		}

		function validarYMostrarVentana() {
			if (validarFormulario()) {
				mostrarVentana();
			}
		}*/
	</script>
</body>

</html>